{% extends 'iraq.html' %}
{% load i18n %}

{% block javascripts %}
<script src="/static/charts/javascripts/OpenLayers-2.8/OpenLayers.js"></script>
<script src="/static/charts/javascripts/jquery-ui-1.8.custom.min.js"></script>
<script src="/static/charts/javascripts/raphael-min.js"></script>
<script src="/static/charts/javascripts/graphs.js"></script>
<script src="/static/charts/javascripts/map.js" ></script>
<script src="/static/charts/javascripts/map_results.js" ></script>
<script src="/static/charts/javascripts/language_switcher.js"></script>
<script src="/static/charts/javascripts/filters.js"></script>
{% endblock %}

{% block title_suffix %}{% trans 'Map' %}{% endblock %}

{% block question %}
<div class="question_section">
<span id="question-id" style="display:none;">{{question.id}}</span>
<span id="governorate-id" style="display:none;">{{ governorate.id }}</span>
<span id="gender-filter" style="display:none;">{{ gender_filter }}</span>
<span id="age_range_filter" style="display:none;">{{ age_range_filter }}</span>
<span id="governorate-zoom" style="display:none;">{{ governorate.zoom_level }}</span>
<span id="bbox" style="display:none;">{{bbox}}</span>
<div class="question">
    <h2>{% trans question.text %}</h2>
</div>
<p class="total_responses">
   {% blocktrans %}{{ total_responses }} responses <br/>
    from {{ region }} {% endblocktrans %} 
</p>
</div>
{% endblock %}
        
{% block map_container %}
<div id="map_container">
<div id="map" style="widh:500px; height:465px;"></div>
</div>
{% endblock %}
        
{% block chart %}
<div class="keys_section">
    <ul>
        <li class="color_key"> {% trans 'Color indicates the top response category for each governarate.' %} </li>
        <li class="point_key"> {% trans 'Points are scaled by total number of responses in each governarate.' %} </li>
    </ul>
</div>
<div class="chart_bar">
    <h3>
        <span class="response_criteria"> {% trans 'Top Response for' %} {% trans region %}</span>
        <span class="top_concern" style="color: {{top_response.color}};">{% trans top_response.text %} {{ top_response.percentage }}%</span>
    </h3>
    <div id="chart">
        <script type="text/javascript">
        	// these variables are used by graph.js
            var regional_poll_responses = {{ chart_data|safe }};
            var national_poll_responses = {{ national_data|safe }};
        </script>
    </div>
    <p class="chart_note">{% trans 'National results' %}</p>
</div>
{% endblock %}
